(function(c){c.extend(c,{setCookie:function(a){a=c.extend({key:"",value:"",path:"/",domain:"",expireDay:-1,today:false,secure:false},a);if(a.key!=""){var b=[];b.push(a.key);b.push("=");b.push(encodeURIComponent(a.value));b.push("; path=");b.push(a.path);if(a.domain!=""){b.push("; domain=");b.push(a.domain)}if(a.expireDay>0){var d=new Date;a.today&&d.setHours(0,0,0,0);d.setTime(d.getTime()+a.expireDay*24*60*60*1E3+1E3);b.push("; expires=");b.push(d.toGMTString())}else if(a.expireDay==0){d=new Date;
d.setTime(d.getTime()-1);b.push("; expires=");b.push(d.toGMTString())}a.secure&&b.push("; secure");document.cookie=b.join("")}},getCookie:function(a){return(a=document.cookie.match("(?:^|;)\\s*"+a.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")+"=([^;]*)"))?decodeURIComponent(a[1]):false},delCookie:function(a){c.setCookie({key:a,expireDay:0})},jsonToString:function(a){switch(typeof a){case "object":var b=[];if(a instanceof Array){for(var d=0,e=a.length;d<e;d++)b.push(c.jsonToString(a[d]));return"["+b.join(",")+
"]"}else if(a instanceof RegExp)return a.toString();else{for(d in a)b.push('"'+d+'":'+c.jsonToString(a[d]));return"{"+b.join(",")+"}"}case "function":return"function() {}";case "number":return a.toString();case "string":return'"'+a.replace(/(\\|\")/g,"\\$1").replace(/\n|\r|\t/g,function(f){return"\n"==f?"\\n":"\r"==f?"\\r":"\t"==f?"\\t":""})+'"';case "boolean":return a.toString();default:return a.toString()}},getThis:function(a){return c.browser.msie?a.srcElement:a.target},offHeight:function(){if(c.browser.msie)return document.documentElement.clientHeight;
return window.innerHeight},scrollTop:function(){if(typeof window.pageYOffset!="undefined")return window.pageYOffset;else if(typeof document.compatMode!="undefined"&&document.compatMode!="BackCompat")return document.documentElement.scrollTop;else if(typeof document.body!="undefined")return document.body.scrollTop;return 0},copyText:function(a){if(window.clipboardData)window.clipboardData.setData("Text",a);else if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(b){alert("\u60a8\u7684\u6d4f\u89c8\u5668\u5b89\u5168\u9650\u5236\u9650\u5236\u60a8\u8fdb\u884c\u590d\u5236\u64cd\u4f5c\uff0c\u8bf7\u624b\u52a8\u590d\u5236\u4ee3\u7801\u3002");
return}var d=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!d)return;var e=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!e)return;e.addDataFlavor("text/unicode");var f={};f=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);f.data=a;e.setTransferData("text/unicode",f,a.length*2);if(!d)return false;d.setData(e,null,
Components.interfaces.nsIClipboard.kGlobalClipboard)}alert("\u590d\u5236\u6210\u529f\uff01")},stopDefault:function(a){if(a&&a.preventDefault)a.preventDefault();else window.event.returnValue=false;return false},stopBubble:function(a){if(a&&a.stopPropagation)a.stopPropagation();else window.event.cancelBubble=true}});if(typeof LEON=="undefined")LEON={};c.extend(LEON,{currentBrandFacetLet:"ALL",brandMaxH:295,brandMinH:64,brandH:{},brandStatus:"min",ie6Constant:{},staticUrl:"http://www.xiustatic.com/",
wwwUrl:"http://www.xiu.com/",searchUrl:"http://search.xiu.com/",listUrl:"http://list.xiu.com/",brandUrl:"http://brand.xiu.com/",init:function(a){c.extend(LEON,a)},mktItemCountInteractive:function(a,b,d){LEON.ajaxItemCount(a,function(e){if(typeof e=="number"){var f=c("#J_ebayTab");f.find(".itemcount").html("("+e+")");var h=f.children("a");if(e==0){f.addClass("disable");h.attr("href","javascript:void(0);")}else{var m="atype=ebaytabclk|stype="+b+"|sattr="+d+"|resnum="+e;h.click(function(){XIU.Window.ctraceClick(m,
"search")})}f.show()}})},ajaxItemCount:function(a,b){if(!(typeof b!="function"||!a)){a=c.extend({},a);c.ajax({url:LEON.searchUrl+"ajax/mkt-item-count.htm?jsoncallback=?",data:a,dataType:"jsonp",cache:false,success:function(d){var e=0;if(d&&d.itemCount)e=d.itemCount;b(e)}})}},scrollViewTop:function(a,b,d){a=a||0.1;b=b||16;var e,f;if(typeof window.pageYOffset!="undefined"){e=window.pageXOffset||0;f=window.pageYOffset||0}else if(typeof document.compatMode!="undefined"&&document.compatMode!="BackCompat"){e=
document.documentElement.scrollLeft||0;f=document.documentElement.scrollTop||0}else if(typeof document.body!="undefined"){e=document.body.scrollLeft||0;f=document.body.scrollTop||0}if(!(d&&f>d)){d=1+a;window.scrollTo(Math.floor(e/d),Math.floor(f/d));e>1||f>1?window.setTimeout("LEON.scrollViewTop("+a+","+b+","+f+")",b):window.scrollTo(0,0)}},initToTopBtn:function(){},goodsImageErrorMethod:function(a){c("#J_itemListBox img").one("error",function(){c(this).attr("src",a)})},switchBrandBox:function(a){if(LEON.currentBrandFacetLet!=
a){c("#J_brandFacet_"+LEON.currentBrandFacetLet).hide();c("#J_brandFacet_"+a).show();c("#J_flet_"+LEON.currentBrandFacetLet).removeClass("active");c("#J_flet_"+a).addClass("active");LEON.currentBrandFacetLet=a;"min"==LEON.brandStatus?c("#J_itemboxbrand").height(LEON.brandH["J_brandFacet_"+a]>LEON.brandMinH?LEON.brandMinH:LEON.brandH["J_brandFacet_"+a]):c("#J_itemboxbrand").height(LEON.brandH["J_brandFacet_"+a]>LEON.brandMaxH?LEON.brandMaxH:LEON.brandH["J_brandFacet_"+a]);LEON.brandH["J_brandFacet_"+
a]>LEON.brandMinH?c("#J_brand_moreopt").show():c("#J_brand_moreopt").show().hide()}},onOffBrandBox:function(a){if(!(c("#J_itemboxbrand:animated").length>0)){var b=LEON.currentBrandFacetLet,d=c("#J_itemboxbrand");if("min"==LEON.brandStatus){b=LEON.brandH["J_brandFacet_"+b]>LEON.brandMaxH?LEON.brandMaxH:LEON.brandH["J_brandFacet_"+b];d.animate({height:b+"px"},"normal",function(){d.css({"overflow-y":"auto"})});LEON.brandStatus="max";c(a).html("\u6536\u8d77").removeClass("down")}else{b=LEON.brandH["J_brandFacet_"+
b]>LEON.brandMinH?LEON.brandMinH:LEON.brandH["J_brandFacet_"+b];d.css({"overflow-y":"hidden",overflow:"hidden"}).animate({height:b+"px"},"normal");LEON.brandStatus="min";c(a).html("\u66f4\u591a").addClass("down")}c(a).toggleClass("down")}},initBrandDisplayData:function(){c("#J_itemboxbrand").children("ul").each(function(){var a=c(this),b=a.attr("id");LEON.brandH[b]=a.outerHeight();a.css({display:"none",visibility:"visible"})});c("#J_brandFacet_ALL").show();c("#J_itemboxbrand").css({height:(LEON.brandH.J_brandFacet_ALL>
LEON.brandMinH?LEON.brandMinH:LEON.brandH.J_brandFacet_ALL)+"px"});LEON.brandH.J_brandFacet_ALL>LEON.brandMinH?c("#J_brand_moreopt").show():c("#J_brand_moreopt").hide()},onOffFacetBox:function(a,b){if(!(c("#J_itembox_"+b+":animated").length>0)){b=c("#J_itembox_"+b);var d=c(a);if(!d.data("boxheight")){var e=b.height();d.data("boxheight",e)}if(d.data("open")){b.animate({height:30},"normal");d.html("\u66f4\u591a").data("open",false)}else{b.animate({height:d.data("boxheight")},"normal");d.html("\u6536\u8d77").data("open",
true)}c(a).toggleClass("down")}},href:function(a){if(a)location.href=a},exePriceRangeFilter:function(a){if(a)return false;a=parseFloat(c("#J_finput_minprice").val());var b=parseFloat(c("#J_finput_maxprice").val()),d=c("#J_pricerangefilter_form").attr("action"),e=d.indexOf("?")<=0?"?":"&";if(!(isNaN(a)&&isNaN(b)))if(isNaN(a)){b=b<0?0:b;d+=e+("e_price="+b)}else if(isNaN(b)){a=a<0?0:a;d+=e+("s_price="+a)}else{b=b<0?0:b;a=a<0?0:a;if(b>=a)d+=e+("s_price="+a+"&e_price="+b);else{c("#J_finput_minprice").val(b);
c("#J_finput_maxprice").val(a);d+=e+("s_price="+b+"&e_price="+a)}}location.href=d},exeCancelPriceRangeFilter:function(){c("#J_finput_minprice,#J_finput_maxprice").val("")},bindPriceRange:function(){var a=c("#J_pricerangefilter_box"),b;c("#J_finput_minprice,#J_finput_maxprice").focus(function(){window.clearTimeout(b);a.addClass("pricerange-active")}).blur(function(){window.clearTimeout(b);b=window.setTimeout(function(){a.removeClass("pricerange-active")},200)}).keyup(function(){/[^0-9\.]/g.test(c(this).val())&&
c(this).val(c(this).val().replace(/[^0-9\.]/g,""))})},catalogSearchIntercative:function(a){a=c.extend({tireId:"J_catalogTire"},a);a=c("#"+a.tireId);if(!(!a&&a.length==0)){var b=new Array(4);a.find("dt").each(function(){var d=c(this).attr("id"),e=parseInt(d.slice(13,14)),f=d.slice(15,d.length);d=c("#J_catalog_dd_"+f);if(c(this).children("i").hasClass("minus"))b[e]=f;d&&d.length>0&&c(this).children("i.minus,i.plus").click(function(){if(c(this).hasClass("minus")){c(this).removeClass("minus");for(var h=
e;h<4;h++){c("#J_catalog_dd_"+b[h]).hide();c("#J_catalog_dt_"+h+"_"+b[h]).children("i.minus").removeClass("minus");b[h]=null}}else if(b[e]!=f){c(this).addClass("minus");for(h=e;h<4;h++){c("#J_catalog_dd_"+b[h]).hide();c("#J_catalog_dt_"+h+"_"+b[h]).children("i.minus").removeClass("minus");b[h]=null}b[e]=f;c("#J_catalog_dd_"+b[e]).show()}})})}},catalogListIntercative:function(a){a=c.extend({tireId:"J_catalogTire"},a);c("#"+a.tireId).find("dt").each(function(){var b=c(this),d=b.attr("id").split("_")[2];
b.data("cid",d);if(b.hasClass("down")){if(b.hasClass("up"))LEON.currentCatId=d;b.click(function(){var e=c(this).data("cid");if(LEON.currentCatId){c("#J_catgroup_"+LEON.currentCatId).removeClass("up");c("#J_catgroupcon_"+LEON.currentCatId).hide();if(LEON.currentCatId==e){LEON.currentCatId=0;return}}LEON.currentCatId=e;c("#J_catgroup_"+LEON.currentCatId).addClass("up");c("#J_catgroupcon_"+LEON.currentCatId).show()})}})},pageFormSubmitFilter:function(a){a=c.extend({pageBoxId:"J_bottomPageBox"},a);a=
c("#"+a.pageBoxId);var b=a.find("form");a.find("button").eq(0);b.eq(0).bind("submit",function(){var d=b.find('input[name="p"]');if(!d)return true;var e=parseInt(b.find('input[name="p"]').val())||1;d.attr("disabled","disabled");d=/^(.*)\/([0-9]+)\.html\/?(\?(.*))?$/gi;var f=/^(.*)\/([0-9]+-.*-.*-.*-.*-.*-.*-.*-.*-.*-.*-.*-.*-.*-).*\.html\/?(\?(.*))?$/gi,h=b.attr("action");if(d.test(h))h=h.replace(d,"$1/$2--------------"+e+".html");else if(f.test(h))h=h.replace(f,"$1/$2"+e+".html");b.attr("action",
h);return true})}});c.extend(c.fn,{clkBindMethod:function(){c(this).find("a").each(function(){var a=c(this),b=a.attr("clkstat");b&&a.click(function(){XIU.Window.ctraceClick(b,"search")})})},dataCollectMethod:function(a){var b=c.extend({siteId:1001},a);c(this).find("a[dataCollect]").each(function(){c(this).click(function(){for(var d=c(this).attr("dataCollect").split("|"),e=0;e<d.length;e++){var f=d[e].split("=");if(f[0]=="type")b.bizType=f[1];else if(f[0]=="id")b.bizId=f[1]}LEON.xreDataCollect(b)})})}});
c.extend(LEON,{bfdData:function(a){a=c.extend({clientName:"Czouxiu",hasResult:true,kw:"",itemSaleNum:10,itemVisitNum:10,itemHistoryNum:5,saleBoxId:"banner_PersonalSalesList",visitBoxId:"banner_PersonalVisitList",historyBoxId:"banner_BrowsingHistory",categoryList:["all"]},a);LEON.bfdData.setting=a;_BFD=window._BFD||{};_BFD.BFD_ITEM_INFO={search_result:a.hasResult,type:a.type,keyword:a.kw,catId:a.catId,brandId:a.bId,client:a.clientName};_BFD.bfd_init_ready=true},xreData:function(a){a=c.extend({clientName:"Czouxiu",
kw:"",hasResult:true,itemSaleNum:10,itemVisitNum:10,itemHistoryNum:10,saleBoxId:"banner_PersonalSalesList",visitBoxId:"banner_PersonalVisitList",historyBoxId:"banner_BrowsingHistory",displayTop10:true,brandRemmendOn:false,salesXREId:1003,catBrowseXREId:1004,brandBrowseXREId:1005,xiuRecommendXREId:1006,channelId:1001},a);LEON.xreData.setting=a;_BFD=window._BFD||{};_BFD.BFD_ITEM_INFO={search_result:a.hasResult,type:a.type,keyword:a.kw,client:a.clientName};_BFD.bfd_init_ready=false;var b=new xres.RecommendByOfficialList("LEON.recommendCallback");
b.productList=a.itemId;b.catId=a.catId;b.brandId=a.brandId;b.num=a.itemSaleNum;b.siteId=a.siteId;b.channelId=a.channelId;xres.invoke(b)},salesCallback:function(a){LEON.showLeftXRE(a,1,LEON.xreData.setting.salesXREId)},catBrowseCallback:function(a){LEON.showLeftXRE(a,2,LEON.xreData.setting.catBrowseXREId)},brandBrowseCallback:function(a){LEON.showLeftXRE(a,3,LEON.xreData.setting.brandBrowseXREId)},recommendCallback:function(a){LEON.bottomXRE(a,LEON.xreData.setting.xiuRecommendXREId)},showLeftXRE:function(a,
b,d){a=eval(a);var e=b=="1"?LEON.xreData.setting.itemSaleNum:LEON.xreData.setting.itemVisitNum,f=a.length;if(f!=0){var h=b=="1"?"\u731c\u4f60\u559c\u6b22":"\u6d4f\u89c8\u6392\u884c",m=b=="1"?LEON.xreData.setting.saleBoxId:LEON.xreData.setting.visitBoxId;b="atype="+(b=="1"?"buytop":"viewtop")+"|stype="+(LEON.xreData.setting.stype?LEON.xreData.setting.stype:"kw")+"|sattr="+(LEON.xreData.setting.sattr?LEON.xreData.setting.sattr:"")+"|itemid=";e=f>e?e:f;f=0;h=c('<div class="hd"><span class="tit">'+h+
"</span>"+(LEON.xreData.setting.displayTop10?'<span class="tag">Top10</span></div>':""));var l=c("<div/>").addClass("bd").addClass("clearfix"),k=c("<ul/>").appendTo(l),i,g,j;do{g=a[f];i=c("<li/>");f==e-1&&i.addClass("nodot");j=g.pictureUrl;if(j.indexOf("_100_100")>0)j=j.replace("_100_100","_80_80");g.price=parseFloat(g.price)-parseInt(g.price)>0?parseFloat(g.price).toFixed(2):parseInt(g.price);i.append('<a clkstat="'+b+g.id+'" class="img" target="_blank" href="'+g.productUrl+"?xres_id="+d+'" title="'+
g.name+'"><img src="'+j+'"/></a>');i.append('<a clkstat="'+b+g.id+'" class="tit" target="_blank" href="'+g.productUrl+"?xres_id="+d+'" title="'+g.name+'">'+g.name+"</a>");i.append('<p class="price">'+g.price+"</p>");k.append(i)}while(++f<e);c("#"+m).append(h).append(l).show();k.clkBindMethod()}},bottomXRE:function(a,b){a=eval(a);var d=a.length;if(d!=0){var e="atype=xiuroc|stype="+(LEON.xreData.setting.stype?LEON.xreData.setting.stype:"kw")+"|sattr="+(LEON.xreData.setting.sattr?LEON.xreData.setting.sattr:
"")+"|itemid=",f=0;d=d>LEON.xreData.setting.itemHistoryNum?LEON.xreData.setting.itemHistoryNum:d;var h=c('<div class="hd"><p class="tit">\u731c\u4f60\u559c\u6b22<span>Recommend</span></p></div>'),m=c("<div/>").addClass("xs-salexiurecom-bottombox").addClass("xs-xiurecombox"),l=c("<div/>").addClass("bd").addClass("clearfix").appendTo(m);l.css({overflow:"hidden"});l=c("<ul/>").appendTo(l);l.css({width:"9999px"});var k,i,g;do{i=a[f];if(!(i.length<=3)){k=c("<li/>");f==1&&k.addClass("first");f==d-1&&k.addClass("last");
i.price=parseFloat(i.price)-parseInt(i.price)>0?parseFloat(i.price).toFixed(2):parseInt(i.price);g=i.pictureUrl;g=g.substring(0,g.lastIndexOf("/"))+"/g1_180_240.jpg";if(g.indexOf("images.xiustatic.com")>0)g=g.replace("images.xiustatic.com","image.zoshow.com");k.append('<p class="picbox"><a clkstat="'+e+i.id+'" target="_blank" href="'+i.productUrl+"?xres_id="+b+'" title="'+i.name+'"><img src="'+g+'" /></a></p>');k.append('<p class="tit"><a clkstat="'+e+i.id+'" target="_blank" href="'+i.productUrl+
"?xres_id="+b+'" title="'+i.name+'">'+i.name+"</a></p>");k.append('<p class="price xs-ico">'+i.price+"</p>");l.append(k)}}while(++f<d);c("#"+LEON.xreData.setting.historyBoxId).append(h).append(m).show();l.clkBindMethod();var j=true;c(".xs-salexiurecom-bottombox").infiniteCarousel().mouseover(function(){j=false}).mouseout(function(){j=true});setInterval(function(){j&&c(".xs-salexiurecom-bottombox").trigger("next")},5E3)}},xreDataCollect:function(a){var b=c.extend({siteId:1001},a);if(a.bizType&&isNaN(a.bizType))if(a.bizType==
"list")b.bizType="2";else if(a.bizType=="brand")b.bizType="3";var d=c.getCookie("xiu.login.userId");d=d?d:"";if(a.kw){a=new xclk.SK;a.site_id=b.siteId;a.channel_id=b.channelId;a.user_id=d;a.key_words=b.kw;a.result_ind=b.result>0?1:0;xclk.invoke(a)}else{a=new xclk.VO;a.site_id=b.siteId;a.channel_id=b.channelId;a.user_id=d;a.obj_id=b.bizId;a.obj_type=b.bizType;a.x_price="";a.category_id="";a.brand_id="";a.scene_id="";a.ref_page_id="";a.algorithm_ind="";xclk.invoke(a)}},bfdCreateRecommend:function(a,
b,d,e){a=eval(a);var f=a.length;if(f!=0){var h=0;f=f>10?10:f;var m=c('<div class="hd"><p class="tit">\u9002\u5408\u60a8\u7684\u5546\u54c1Top10<span>Recommend</span></p></div>'),l=c("<div/>").addClass("xs-salexiurecom-bottombox").addClass("xs-xiurecombox"),k=c("<div/>").addClass("bd").addClass("clearfix").appendTo(l);k.css({overflow:"hidden"});k=c("<ul/>").appendTo(k);k.css({width:"9999px"});var i,g,j;do{g=a[h];if(!(g.length<=3)){i=c("<li/>");h==1&&i.addClass("first");h==f-1&&i.addClass("last");g.xprice=
parseFloat(g.xprice)-parseInt(g.xprice)>0?parseFloat(g.xprice).toFixed(2):parseInt(g.xprice);j=g.img;j=j.substring(0,j.lastIndexOf("/"))+"/g1_180_240.jpg";if(j.indexOf("images.xiustatic.com")>0)j=j.replace("images.xiustatic.com","image.zoshow.com");i.append('<p class="picbox"><a target="_blank" href="'+g.url+"?bfd_id="+e+"&req_id="+d+'" title="'+g.name+'"><img src="'+j+'" /></a></p>');i.append('<p class="tit"><a target="_blank" href="'+g.url+"?bfd_id="+e+"&req_id="+d+'" title="'+g.name+'">'+g.name+
"</a></p>");i.append('<p class="price xs-ico">'+g.xprice+"</p>");k.append(i)}}while(++h<f);l.append('<a href="http://www.baifendian.com" class="bfd-click-link " style="z-index:10" target="_blank"></a>');c("#"+b).append(m).append(l).show();k.clkBindMethod();var n=true;c(".xs-salexiurecom-bottombox").infiniteCarousel().mouseover(function(){n=false}).mouseout(function(){n=true});setInterval(function(){n&&c(".xs-salexiurecom-bottombox").trigger("next")},5E3)}}})})(jQuery);
